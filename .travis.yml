os: linux

dist: focal

git:
  depth: 1

cache: false

language: python

python: 3.8

install:
- pip install --upgrade pip
- pip install pelican markdown flake8 pydocstyle pylint pylint_runner

script:
- pelican content -s pelicanconf.py --fatal warnings --verbose

after_success:
- flake8 .
- pydocstyle .
- pylint_runner
- grep -zorP "<table>(.|\r|\n)*</table>" output --exclude-dir={author,category} --exclude=index.html